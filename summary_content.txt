<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pythonç­”é¢˜æŒ‘æˆ˜ - æ€»ç»“</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* å¼ºåˆ¶åº”ç”¨èƒŒæ™¯é¢œè‰² */
        body {
            background-color: var(--background) !important;
            margin: 0;
            padding: 0;
            overflow: hidden; /* ç¦æ­¢bodyæ»šåŠ¨ */
            height: 100vh; /* è®¾ç½®bodyé«˜åº¦ä¸ºè§†çª—é«˜åº¦ */
            width: 100vw; /* è®¾ç½®bodyå®½åº¦ä¸ºè§†çª—å®½åº¦ */
        }
        
        /* åªä¿ç•™é¡µé¢ç‰¹å®šçš„æ ·å¼ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            height: 100vh; /* ä½¿å®¹å™¨é«˜åº¦ä¸ºè§†çª—é«˜åº¦ */
            display: flex;
            flex-direction: column;
            padding: 15px; /* å‡å°‘å†…è¾¹è· */
            overflow: hidden; /* é˜²æ­¢å‡ºç°æ»šåŠ¨æ¡ */
            position: fixed; /* å›ºå®šä½ç½® */
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        
        header {
            text-align: center;
            margin-bottom: 15px;
            display: none; /* éšè—æ•´ä¸ªheader */
        }
        
        h1 {
            display: none; /* éšè—æ ‡é¢˜ */
        }
        
        /* æ ‡é¢˜æµå…‰åŠ¨ç”» */
        .title-glow {
            display: none; /* éšè—æ ‡é¢˜æµå…‰ */
        }
        
        @keyframes glow-pulse {
            0% {
                opacity: 0.2;
                transform: scale(0.8);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.1);
            }
            100% {
                opacity: 0.2;
                transform: scale(0.8);
            }
        }
        
        /* ç¾åŒ–è¿”å›é¦–é¡µæŒ‰é’® */
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 18px;
            background: linear-gradient(135deg, #FF9F0A, #FF375F);
            color: white;
            border: none;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(255, 55, 95, 0.3);
            z-index: 100;
            display: flex;
            align-items: center;
        }
        
        .back-button:before {
            content: 'â—€ï¸';
            margin-right: 8px;
            font-size: 1.2rem;
        }
        
        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 55, 95, 0.5);
            background: linear-gradient(135deg, #FFB340, #FF5277);
        }
        
        .subtitle {
            color: var(--text-light);
            font-size: 1.3rem;
            margin-bottom: 20px;
        }
        
        .quiz-summary {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px 20px 0 20px; /* è¿›ä¸€æ­¥å‡å°‘å†…è¾¹è· */
            margin: 0 auto;
            position: relative;
            max-width: 800px;
            width: 100%;
            height: calc(100vh - 30px); /* å›ºå®šé«˜åº¦ä¸ºè§†çª—é«˜åº¦å‡å»containerçš„padding */
            display: flex;
            flex-direction: column;
            gap: 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
            isolation: isolate;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
        }
        
        /* æ›¿æ¢åŠ¨æ€æ¸å˜è¾¹æ¡†ä¸ºé™æ€è¾¹æ¡† */
        .quiz-summary::before {
            content: '';
            position: absolute;
            inset: -0.5px;
            z-index: -1;
            border-radius: 20px;
            padding: 0.5px;
            background: linear-gradient(
                135deg,
                rgba(255, 159, 10, 0.5) 0%,
                rgba(191, 90, 242, 0.5) 30%,
                rgba(64, 200, 224, 0.5) 70%,
                rgba(255, 159, 10, 0.5) 100%
            );
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            -webkit-mask-composite: xor;
            opacity: 0.7;
            /* ç§»é™¤åŠ¨ç”» */
        }

        .quiz-summary::after {
            content: '';
            position: absolute;
            inset: 0;
            z-index: -2;
            border-radius: 20px;
            background: radial-gradient(
                circle at top left,
                rgba(64, 200, 224, 0.15) 0%,
                transparent 60%
            ), radial-gradient(
                circle at bottom right,
                rgba(255, 159, 10, 0.15) 0%,
                transparent 60%
            );
            filter: blur(15px);
            opacity: 0.5;
            /* ç§»é™¤åŠ¨ç”» */
        }

        /* ç§»é™¤ä¸éœ€è¦çš„åŠ¨ç”»å®šä¹‰ */
        /*
        @keyframes border-flow {
            0% {
                transform: translateX(-50%);
            }
            50% {
                transform: translateX(50%);
            }
            100% {
                transform: translateX(-50%);
            }
        }
        */
        
        .summary-header {
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 8px; /* è¿›ä¸€æ­¥å‡å°ä¸‹å†…è¾¹è· */
            margin-bottom: 8px; /* è¿›ä¸€æ­¥å‡å°ä¸‹å¤–è¾¹è· */
            margin-top: 0; /* ç§»é™¤ä¸Šå¤–è¾¹è· */
        }
        
        /* åˆ›æ„å…³å¡æ ‡é¢˜æ ·å¼ - ä¸ç­”é¢˜é¡µé¢ç»Ÿä¸€ */
        .level-title {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 12px; /* è¿›ä¸€æ­¥å‡å°‘ä¸‹è¾¹è· */
            flex-wrap: wrap;
            gap: 10px;
            text-align: center;
        }
        
        .level-number-container {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .level-number {
            font-size: 3.5rem;
            font-weight: 800;
            color: #FF9F0A;
            line-height: 1;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            margin-right: 5px;
        }
        
        .level-en {
            font-size: 1.8rem;
            font-weight: 600;
            color: #FF375F;
            text-transform: uppercase;
            line-height: 1;
            letter-spacing: 1px;
            margin-top: 5px;
        }
        
        .level-title-text {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-color);
            background: linear-gradient(135deg, #FF9F0A, #FF375F);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            padding: 5px 0;
        }
        
        /* å°å±å¹•ä¸‹çš„æ ‡é¢˜æ ·å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .level-number {
                font-size: 2.8rem;
            }
            
            .level-en {
                font-size: 1.4rem;
            }
            
            .level-title-text {
                font-size: 1.5rem;
            }
        }
        
        /* ä¿¡æ¯åŒºç¾åŒ– */
        .summary-stats {
            display: flex;
            justify-content: center;
            align-items: stretch;
            margin: 15px 0; /* ç¼©å°ä¸Šä¸‹è¾¹è· */
            padding: 0;
            gap: 12px; /* å‡å°‘é—´è· */
            flex-wrap: wrap;
        }
        
        .score-container, .time-container, .question-status-overview {
            min-height: 65px; /* è¿›ä¸€æ­¥å‡å°‘é«˜åº¦ */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 8px 5px; /* å‡å°‘å†…è¾¹è· */
            border-radius: 8px; /* å‡å°åœ†è§’ */
            background: rgba(50, 50, 55, 0.5); /* ä¸ç­”é¢˜é¡µé¢é€‰é¡¹èƒŒæ™¯ä¸€è‡´ */
            border: 1px solid var(--border-color);
            backdrop-filter: blur(5px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }
        
        .score-container {
            flex: 1;
        }
        
        .time-container {
            flex: 1.2; /* å¢åŠ è€—æ—¶å®¹å™¨çš„å®½åº¦ */
        }
        
        .question-status-overview {
            padding: 10px;
            overflow-y: auto;
            flex: 2;
            max-height: 120px; /* é™åˆ¶æœ€å¤§é«˜åº¦ */
        }
        
        .score-container:hover, .time-container:hover, .question-status-overview:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        }
        
        .stat-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .score-value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #FF9F0A, #FF375F); /* æ©™è‰²åˆ°çº¢è‰²æ¸å˜ */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 8px rgba(255, 55, 95, 0.3);
            display: flex;
            align-items: baseline;
            gap: 5px;
        }
        
        .time-value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #00BFFF, #0A84FF); /* äº®è“è‰²åˆ°æ·±è“è‰²æ¸å˜ */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 8px rgba(10, 132, 255, 0.3);
        }
        
        .answered-count {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            white-space: nowrap;
        }
        
        /* ç­”é¢˜æƒ…å†µä¸€è§ˆæ ·å¼ */
        .status-circles {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 6px; /* ä¸ºæ›´å¤§çš„åœ†åœˆå¢åŠ ä¸€ç‚¹é—´è· */
            margin-top: 3px; /* å¢åŠ ä¸€ç‚¹ä¸Šè¾¹è· */
            max-width: 100%;
            padding: 2px; /* æ·»åŠ ä¸€ç‚¹å†…è¾¹è· */
        }
        
        .status-circle {
            width: 18px; /* å†å¢å¤§ä¸€ç‚¹ */
            height: 18px; /* å†å¢å¤§ä¸€ç‚¹ */
            border-radius: 50%;
            background-color: #444;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px; /* ç¨å¾®å¢å¤§å­—ä½“ */
            font-weight: bold;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .status-circle:hover {
            transform: scale(1.2);
            z-index: 2;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
            filter: brightness(1.2); /* æ·»åŠ äº®åº¦æå‡ */
        }
        
        .status-circle.correct {
            background-color: #30D158; /* ç»¿è‰² */
            box-shadow: 0 0 5px rgba(48, 209, 88, 0.5);
            color: #fff;
        }
        
        .status-circle.incorrect {
            background-color: #FF453A; /* çº¢è‰² */
            box-shadow: 0 0 5px rgba(255, 69, 58, 0.5);
            color: #fff;
        }
        
        .summary-actions {
            display: flex;
            justify-content: space-between;
            gap: 12px; 
            margin-top: 15px; /* å‡å°‘ä¸Šè¾¹è· */
        }
        
        .action-button {
            flex: 1;
            padding: 12px 0; /* å‡å°‘å†…è¾¹è· */
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        #viewWrongAnswers {
            background: linear-gradient(135deg, #FF9F0A, #FF375F, #BF5AF2); /* æ©™è‰²åˆ°çº¢è‰²åˆ°ç´«è‰²æ¸å˜ */
            color: white;
            border: none;
            box-shadow: 0 2px 8px rgba(255, 159, 10, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        #viewWrongAnswers:hover {
            box-shadow: 0 4px 12px rgba(255, 55, 95, 0.5);
        }
        
        #viewWrongAnswers::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #FF9F0A, #FF375F, #BF5AF2);
            z-index: -1;
            filter: blur(8px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        #viewWrongAnswers:hover::before {
            opacity: 0.6;
        }
        
        #tryAgain {
            background: linear-gradient(135deg, #FF453A, #FF375F, #FF2D55); /* çº¢è‰²æ¸å˜ */
            color: white;
            border: none;
            box-shadow: 0 2px 8px rgba(255, 69, 58, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        #tryAgain:hover {
            box-shadow: 0 4px 12px rgba(255, 69, 58, 0.5);
        }
        
        #tryAgain::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #FF453A, #FF375F, #FF2D55);
            z-index: -1;
            filter: blur(8px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        #tryAgain:hover::before {
            opacity: 0.6;
        }
        
        /* è°ƒæ•´é¢˜ç›®å›é¡¾åŒºé—´è· */
        #questionReviews {
            padding: 5px 0 15px 0; /* å‡å°é¡¶éƒ¨å’Œåº•éƒ¨é—´è· */
            flex: 1; /* è®©é¢˜ç›®åŒºåŸŸå ç”¨å®¹å™¨çš„å‰©ä½™ç©ºé—´ */
            overflow-y: auto; /* åªæœ‰é¢˜ç›®åŒºåŸŸæ»šåŠ¨ */
            margin-right: -10px; /* ä¸ºæ»šåŠ¨æ¡é¢„ç•™ç©ºé—´ */
            padding-right: 10px; /* ä¸ºæ»šåŠ¨æ¡é¢„ç•™ç©ºé—´ */
            position: relative; /* ç¡®ä¿ç»å¯¹å®šä½çš„å­å…ƒç´ ç›¸å¯¹äºæ­¤å®šä½ */
            scrollbar-width: thin; /* ç»†æ»šåŠ¨æ¡ */
        }
        
        .question-review {
            background: rgba(40, 40, 45, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px; /* å‡å°åœ†è§’ */
            padding: 15px; /* å‡å°å†…è¾¹è· */
            margin-bottom: 10px; /* å‡å°ä¸‹è¾¹è· */
            position: relative;
            margin-top: 0; /* ç§»é™¤ä¸Šè¾¹è· */
            word-wrap: break-word;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }
        
        .question-review:hover {
            background: rgba(45, 45, 50, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        /* é”™è¯¯é¢˜ç›®æ ·å¼ */
        .error-item {
            border-left: 4px solid #FF454A; /* å‡å°è¾¹æ¡†å®½åº¦ */
            background: rgba(50, 30, 30, 0.7);
        }
        
        .error-mark {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.1rem; /* å‡å°å›¾æ ‡ */
            color: #FF454A;
            font-weight: bold;
        }
        
        /* æ­£ç¡®é¢˜ç›®æ ·å¼ */
        .correct-item {
            border-left: 4px solid var(--status-completed); /* å‡å°è¾¹æ¡†å®½åº¦ */
        }
        
        .question-review h3 {
            font-size: 1rem; /* å‡å°å­—ä½“ */
            margin-bottom: 8px; /* å‡å°é—´è· */
            color: var(--text-color);
            line-height: 1.4; /* é€‚å½“å‡å°è¡Œé«˜ */
        }
        
        .question-title {
            font-weight: 600;
            margin-bottom: 12px; /* å‡å°ä¸‹è¾¹è· */
            color: var(--text-color);
            line-height: 1.4; /* å‡å°è¡Œé«˜ */
            font-size: 0.95rem; /* ç¨å¾®å‡å°å­—ä½“ */
        }
        
        .review-options {
            display: flex;
            flex-direction: column;
            gap: 6px; /* å‡å°é—´è· */
            margin-top: 10px; /* å‡å°ä¸Šè¾¹è· */
        }
        
        .option-review {
            padding: 8px 15px; /* å‡å°å†…è¾¹è· */
            border-radius: 6px; /* å‡å°åœ†è§’ */
            background: rgba(50, 50, 55, 0.5);
            border: 1px solid var(--border-color);
            color: var(--text-light);
            position: relative;
            font-size: 0.9rem; /* å‡å°å­—ä½“ */
        }
        
        .option-review.selected {
            border-color: var(--primary-color);
        }
        
        .option-review.correct {
            border-color: var(--status-completed);
            background-color: rgba(50, 215, 75, 0.1);
        }
        
        .option-review.incorrect {
            border-color: #FF454A;
            background-color: rgba(255, 69, 58, 0.1);
        }
        
        .explanation-container {
            margin-top: 10px; /* å‡å°ä¸Šè¾¹è· */
            padding: 8px 10px; /* å‡å°å†…è¾¹è· */
            background: rgba(50, 50, 55, 0.3);
            border-radius: 6px; /* å‡å°åœ†è§’ */
            color: var(--text-light);
            font-size: 0.9rem; /* å‡å°å­—ä½“ */
        }
        
        .answer-result {
            margin-top: 8px; /* å‡å°ä¸Šè¾¹è· */
            padding: 8px 10px; /* å‡å°å†…è¾¹è· */
            border-radius: 6px; /* å‡å°åœ†è§’ */
            background: rgba(50, 50, 55, 0.4);
            font-size: 0.9rem; /* å‡å°å­—ä½“ */
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .user-answer {
            color: var(--text-light);
            flex: 1;
            min-width: 45%;
        }
        
        .correct-answer {
            color: var(--status-completed);
            font-weight: 500;
            flex: 1;
            min-width: 45%;
            text-align: right;
        }
        
        /* åª’ä½“æŸ¥è¯¢ï¼Œé€‚åº”ä¸åŒå±å¹•å¤§å° */
        @media (max-width: 768px) {
            .summary-stats {
                flex-direction: column;
                gap: 8px;
            }
            
            .score-container, .time-container, .question-status-overview {
                width: 100%;
                min-height: 60px;
            }
            
            .question-status-overview {
                flex: 1;
                max-height: 100px; /* å°å±å¹•ä¸‹ç¼©å°æœ€å¤§é«˜åº¦ */
            }
            
            .status-circles {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .status-circle {
                width: 12px; /* å°å±å¹•ä¸‹ç¨å¾®ç¼©å°åœ†åœˆ */
                height: 12px;
            }
            
            /* å°å±å¹•ä¸‹æ»šåŠ¨æ¡é€‚é… */
            .question-status-overview::-webkit-scrollbar {
                width: 4px;
                height: 4px;
            }
        }
        
        /* é¢˜ç›®é«˜äº®æ•ˆæœ */
        .question-review.highlight {
            background: rgba(10, 132, 255, 0.2);
            box-shadow: 0 0 15px rgba(10, 132, 255, 0.5);
            transform: translateY(-3px);
        }
        
        /* ç¦ç”¨æ‰€æœ‰æ»šåŠ¨æ¡æ˜¾ç¤º */
        *::-webkit-scrollbar {
            width: 0 !important;
            height: 0 !important;
            display: none !important;
        }
        
        * {
            -ms-overflow-style: none !important;  /* IE and Edge */
            scrollbar-width: none !important;  /* Firefox */
        }
    </style>
</head>
<body>
    <!-- æ·»åŠ èƒŒæ™¯å…‰æ–‘æ•ˆæœ -->
    <div class="background-effects">
        <div class="light-spot"></div>
        <div class="light-spot"></div>
        <div class="light-spot"></div>
        <div class="light-spot"></div>
    </div>
    
    <div class="container">
        <!-- å°†è¿”å›æŒ‰é’®æ”¾åœ¨containerå†…éƒ¨å·¦ä¸Šè§’ -->
        <a href="index.html" class="back-button">è¿”å›é¦–é¡µ</a>
        
        <header>
            <!-- ç§»é™¤å¤§æ ‡é¢˜ -->
        </header>
        
        <div class="quiz-summary">
            <div class="summary-header">
                <!-- åˆ é™¤åŸæ ‡é¢˜ï¼Œæ·»åŠ å…³å¡æ ‡é¢˜ -->
                <div class="level-title">
                    <div class="level-number-container">
                        <div class="level-number" id="level">1</div>
                        <div class="level-en">LEVEL</div>
                    </div>
                    <div class="level-title-text" id="levelTitle">Pythonç®€ä»‹</div>
                </div>
                <div class="summary-stats">
                    <div class="score-container">
                        <div class="stat-label">å¾—åˆ†</div>
                        <div class="score-value" id="finalScore">0
                            <span class="answered-count" id="answeredCount"></span>
                        </div>
                    </div>
                    <div class="time-container">
                        <div class="stat-label">è€—æ—¶</div>
                        <div class="time-value" id="quizTime">0åˆ†0ç§’</div>
                    </div>
                    <!-- ç­”é¢˜æƒ…å†µä¸€è§ˆæ”¾åœ¨åŒä¸€è¡Œ -->
                    <div class="question-status-overview">
                        <div class="stat-label">ç­”é¢˜æƒ…å†µä¸€è§ˆ</div>
                        <div class="status-circles" id="statusCircles">
                            <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ15ä¸ªåœ†åœˆ -->
                        </div>
                    </div>
                </div>
                
                <div class="summary-actions">
                    <button class="action-button" id="viewWrongAnswers">åªçœ‹é”™é¢˜</button>
                    <button class="action-button" id="tryAgain">å†æ¬¡æŒ‘æˆ˜</button>
                </div>
            </div>
            
            <div id="questionReviews">
                <!-- é¢˜ç›®å›é¡¾å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
            
        </div>
    </div>

    <!-- å®Œå…¨ç§»é™¤å½©è‰²ç¢çº¸ç‰‡å®¹å™¨ -->

<script>
    // å…¨å±€å˜é‡
    let summaryData = null;
    let showingWrongAnswers = false;
    
    // å…³å¡é…ç½®
    window.levelsConfig = {
        totalLevels: 25,
        levels: []
    };
    
    // åŠ è½½å…³å¡é…ç½®æ–‡ä»¶
    function loadLevelsConfig() {
        console.log("æ€»ç»“é¡µé¢: åŠ è½½å…³å¡é…ç½®æ–‡ä»¶...");
        
        return fetch('levels-config.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥: ${response.status} ${response.statusText}`);
                }
                return response.json();
            })
            .then(config => {
                console.log("æˆåŠŸåŠ è½½å…³å¡é…ç½®:", config);
                window.levelsConfig = config;
                
                // æ›´æ–°æ ‡é¢˜
                if (summaryData && summaryData.level) {
                    document.getElementById('levelTitle').textContent = getLevelTitle(summaryData.level);
                    document.title = `Level ${summaryData.level} - ${getLevelTitle(summaryData.level)}`;
                }
                
                return config;
            })
            .catch(error => {
                console.error("åŠ è½½å…³å¡é…ç½®å¤±è´¥:", error);
                console.log("ä½¿ç”¨é»˜è®¤é…ç½®...");
                initDefaultLevelsConfig();
                return window.levelsConfig;
            });
    }
    
    // åˆå§‹åŒ–é»˜è®¤å…³å¡é…ç½®
    function initDefaultLevelsConfig() {
        window.levelsConfig = {
            totalLevels: 25,
            levels: []
        };
        
        // ç”Ÿæˆé»˜è®¤å…³å¡é…ç½®
        for (let i = 1; i <= 25; i++) {
            let title = "";
            const titles = {
                1: "Pythonç®€ä»‹",
                2: "å˜é‡ä¸èµ‹å€¼",
                3: "åŸºæœ¬è¾“å…¥è¾“å‡º",
                4: "è¿ç®—ç¬¦",
                5: "æ³¨é‡Šä¸æ–‡æ¡£",
                6: "æ•°å­—ç±»å‹",
                7: "å­—ç¬¦ä¸²æ“ä½œ",
                8: "åˆ—è¡¨ä¸å…ƒç»„",
                9: "å­—å…¸",
                10: "é›†åˆ",
                11: "æ¡ä»¶è¯­å¥",
                12: "forå¾ªç¯",
                13: "whileå¾ªç¯",
                14: "å¾ªç¯æ§åˆ¶",
                15: "å¼‚å¸¸å¤„ç†",
                16: "å‡½æ•°å®šä¹‰",
                17: "å‚æ•°ä¸è¿”å›å€¼",
                18: "ä½œç”¨åŸŸ",
                19: "æ¨¡å—å¯¼å…¥",
                20: "åŒ…ç®¡ç†",
                21: "ç±»ä¸å¯¹è±¡",
                22: "ç»§æ‰¿ä¸å¤šæ€",
                23: "è£…é¥°å™¨",
                24: "ç”Ÿæˆå™¨",
                25: "æ–‡ä»¶å¤„ç†"
            };
            title = titles[i] || `å…³å¡ ${i}`;
            
            window.levelsConfig.levels.push({
                level: i,
                title: title,
                description: `å®Œæˆå…³å¡ ${i} çš„æŒ‘æˆ˜`
            });
        }
    }

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
        // åˆå§‹åŒ–è¿”å›æŒ‰é’®äº‹ä»¶
        const backButton = document.getElementById('backButton');
        if (backButton) {
            backButton.addEventListener('click', function(e) {
                e.preventDefault(); // é˜»æ­¢é»˜è®¤çš„é“¾æ¥è¡Œä¸º
                window.location.href = 'index.html'; // æ‰‹åŠ¨è·³è½¬åˆ°é¦–é¡µ
            });
        }
        
        // åŠ è½½æ¸¸æˆæ•°æ®
        loadSummaryData();
        
        // åŠ è½½é…ç½®æ–‡ä»¶
        loadLevelsConfig();
        
        // å†æ¬¡æŒ‘æˆ˜æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        const tryAgainButton = document.getElementById('tryAgain');
        if (tryAgainButton) {
            tryAgainButton.addEventListener('click', function() {
                // è·³è½¬åˆ°å¯¹åº”å…³å¡çš„quizé¡µé¢
                if (summaryData && summaryData.level) {
                    window.location.href = `quiz.html?level=${summaryData.level}`;
                } else {
                    window.location.href = 'quiz.html';
                }
            });
        }
        
        // åˆå§‹åŒ–"åªçœ‹é”™é¢˜"æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        const viewWrongAnswersButton = document.getElementById('viewWrongAnswers');
        if (viewWrongAnswersButton) {
            viewWrongAnswersButton.addEventListener('click', function() {
                toggleWrongAnswersView();
                console.log('åˆ‡æ¢é”™é¢˜æ˜¾ç¤ºçŠ¶æ€:', showingWrongAnswers);
            });
        }
    });
    
    // åŠ è½½æ€»ç»“æ•°æ®
    function loadSummaryData() {
        // ä»localStorageåŠ è½½ç­”é¢˜æ€»ç»“æ•°æ®
        const summaryDataString = localStorage.getItem('quizSummaryData');
        
        if (!summaryDataString) {
            // æ²¡æœ‰æ‰¾åˆ°æ€»ç»“æ•°æ®ï¼Œè·³è½¬å›é¦–é¡µ
            alert('æœªæ‰¾åˆ°ç­”é¢˜æ•°æ®ï¼Œå°†è¿”å›é¦–é¡µ');
            window.location.href = 'index.html';
            return;
        }
        
        try {
            // è§£ææ€»ç»“æ•°æ®
            summaryData = JSON.parse(summaryDataString);
            
            // æ˜¾ç¤ºæ€»ç»“ä¿¡æ¯
            document.getElementById('level').textContent = summaryData.level.toString().padStart(2, '0');
            document.getElementById('levelTitle').textContent = getLevelTitle(summaryData.level);
            document.getElementById('finalScore').textContent = summaryData.score; // åªæ˜¾ç¤ºåˆ†æ•°
            
            // æ˜¾ç¤ºç­”å¯¹çš„é¢˜ç›®æ•°
            const answeredCountElement = document.getElementById('answeredCount');
            if (answeredCountElement) {
                answeredCountElement.textContent = `(${summaryData.correctCount}/${summaryData.totalCount})`;
            }
            
            // è®¡ç®—è€—æ—¶
            const timeSpent = summaryData.endTime - summaryData.startTime;
            const minutes = Math.floor(timeSpent / 60000);
            const seconds = Math.floor((timeSpent % 60000) / 1000);
            document.getElementById('quizTime').textContent = `${minutes}åˆ†${seconds}ç§’`;
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            document.title = `Level ${summaryData.level} - ${getLevelTitle(summaryData.level)}`;
            
            // ç”Ÿæˆç­”é¢˜æƒ…å†µåœ†åœˆ
            generateStatusCircles(summaryData.questions, summaryData.answers);
            
            // æ£€æŸ¥æ˜¯å¦å¯ä»¥è§£é”ä¸‹ä¸€å…³
            const level = summaryData.level;
            const score = summaryData.score;
            const nextLevel = level + 1;
            const passScore = 10; // åŠæ ¼çº¿åˆ†æ•°ï¼ˆæµ‹è¯•é˜¶æ®µè®¾ä¸º10åˆ†ï¼‰
            
            // ä»localStorageè·å–æ¸¸æˆçŠ¶æ€
            const gameStateStr = localStorage.getItem('pythonQuizState');
            if (gameStateStr) {
                try {
                    const gameState = JSON.parse(gameStateStr);
                    
                    // å¦‚æœå¾—åˆ†è¾¾æ ‡ä¸”ä¸‹ä¸€å…³æ²¡æœ‰è§£é”ï¼Œåˆ™è§£é”ä¸‹ä¸€å…³
                    if (score >= passScore && nextLevel <= 25 && !gameState.unlockedLevels.includes(nextLevel)) {
                        console.log(`å¾—åˆ†${score}åˆ†ï¼Œå·²è¾¾åˆ°è§£é”æ ‡å‡†ï¼ˆ${passScore}åˆ†ï¼‰ï¼Œè‡ªåŠ¨è§£é”å…³å¡${nextLevel}`);
                        gameState.unlockedLevels.push(nextLevel);
                        
                        // ä¿å­˜æ›´æ–°åçš„æ¸¸æˆçŠ¶æ€
                        localStorage.setItem('pythonQuizState', JSON.stringify(gameState));
                        console.log("å·²è§£é”å…³å¡:", gameState.unlockedLevels);
                    }
                } catch (error) {
                    console.error("è§£ææ¸¸æˆçŠ¶æ€å‡ºé”™:", error);
                }
            }
            
            // æ˜¾ç¤ºé¢˜ç›®å›é¡¾
            showQuestionReviews(summaryData.questions, summaryData.answers);
            
            // åˆå§‹åŒ–æŒ‰é’®äº‹ä»¶
            initEventListeners(summaryData);
            
        } catch (error) {
            console.error('è§£ææ€»ç»“æ•°æ®å‡ºé”™:', error);
            alert('ç­”é¢˜æ•°æ®æ ¼å¼é”™è¯¯ï¼Œå°†è¿”å›é¦–é¡µ');
            window.location.href = 'index.html';
        }
    }
    
    // æ˜¾ç¤ºé¢˜ç›®å›é¡¾
    function showQuestionReviews(questions, userAnswers) {
        const reviewsContainer = document.getElementById('questionReviews');
        reviewsContainer.innerHTML = '';
        
        questions.forEach((question, index) => {
            const questionId = question.id;
            const userAnswer = userAnswers[questionId];
            const isCorrect = userAnswer && userAnswer.correct;
            
            const reviewItem = document.createElement('div');
            reviewItem.className = `question-review ${isCorrect ? 'correct-item' : 'error-item'}`;
            
            // ä¸ºé”™è¯¯é¢˜ç›®æ·»åŠ é†’ç›®æ ‡è¯†
            if (!isCorrect) {
                const errorMark = document.createElement('div');
                errorMark.className = 'error-mark';
                errorMark.innerHTML = 'âŒ';
                reviewItem.appendChild(errorMark);
            }
            
            // é¢˜ç›®æ ‡é¢˜ - ä½¿ç”¨divæ›¿ä»£h3ï¼Œå¹¶ç”¨innerHTMLæ”¯æŒHTML
            const questionTitle = document.createElement('div');
            questionTitle.className = 'question-title';
            questionTitle.innerHTML = `<strong>é—®é¢˜ ${index + 1}:</strong> ${question.question}`;
            reviewItem.appendChild(questionTitle);
            
            // å¦‚æœæ˜¯é€‰æ‹©é¢˜ï¼Œæ˜¾ç¤ºé€‰é¡¹
            if (question.options && question.type !== 'true_false' && question.type !== 'fill_blank') {
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'review-options';
                
                question.options.forEach((option, optIndex) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option-review';
                    
                    // æ·»åŠ é€‰é¡¹æ ‡è¯†å’Œé€‰ä¸­/æ­£ç¡®çŠ¶æ€
                    if (userAnswer && userAnswer.answer === optIndex) {
                        optionElement.classList.add('selected');
                        if (isCorrect) {
                            optionElement.classList.add('correct');
                        } else {
                            optionElement.classList.add('incorrect');
                        }
                    } else if (!isCorrect && question.correctAnswer === optIndex) {
                        optionElement.classList.add('correct');
                    }
                    
                    optionElement.innerHTML = `${String.fromCharCode(65 + optIndex)}. ${option}`;
                    optionsContainer.appendChild(optionElement);
                });
                
                reviewItem.appendChild(optionsContainer);
            }
            
            // ç­”æ¡ˆç»“æœ
            const answerResult = document.createElement('div');
            answerResult.className = 'answer-result';
            
            // ç”¨æˆ·çš„ç­”æ¡ˆ
            const userAnswerElem = document.createElement('div');
            userAnswerElem.className = 'user-answer';
            
            if (question.type === 'true_false') {
                userAnswerElem.innerHTML = `ä½ çš„ç­”æ¡ˆ: <strong>${userAnswer ? (userAnswer.answer ? 'æ­£ç¡®' : 'é”™è¯¯') : 'æœªä½œç­”'}</strong>`;
            } else if (question.type === 'fill_blank') {
                userAnswerElem.innerHTML = `ä½ çš„ç­”æ¡ˆ: <strong>${userAnswer ? userAnswer.answer : 'æœªä½œç­”'}</strong>`;
            } else {
                // å¤šé€‰é¢˜
                if (userAnswer && userAnswer.answer !== undefined) {
                    userAnswerElem.innerHTML = `ä½ çš„ç­”æ¡ˆ: <strong>${question.options[userAnswer.answer]}</strong>`;
                } else {
                    userAnswerElem.innerHTML = `ä½ çš„ç­”æ¡ˆ: <strong>æœªä½œç­”</strong>`;
                }
            }
            answerResult.appendChild(userAnswerElem);
            
            // æ­£ç¡®ç­”æ¡ˆ
            const correctAnswerElem = document.createElement('div');
            correctAnswerElem.className = 'correct-answer';
            
            if (question.type === 'true_false') {
                correctAnswerElem.textContent = `æ­£ç¡®ç­”æ¡ˆ: ${question.correctAnswer ? 'æ­£ç¡®' : 'é”™è¯¯'}`;
            } else if (question.type === 'fill_blank') {
                correctAnswerElem.textContent = `æ­£ç¡®ç­”æ¡ˆ: ${question.correctAnswer}`;
            } else {
                // å¤šé€‰é¢˜
                correctAnswerElem.textContent = `æ­£ç¡®ç­”æ¡ˆ: ${question.options[question.correctAnswer]}`;
            }
            answerResult.appendChild(correctAnswerElem);
            
            reviewItem.appendChild(answerResult);
            
            // è§£é‡Š
            if (question.explanation) {
                const explanationContainer = document.createElement('div');
                explanationContainer.className = 'explanation-container';
                explanationContainer.innerHTML = question.explanation;
                reviewItem.appendChild(explanationContainer);
            }
            
            reviewsContainer.appendChild(reviewItem);
        });
    }

    // è·å–å…³å¡æ ‡é¢˜
    function getLevelTitle(level) {
        // å°è¯•ä»é…ç½®ä¸­è·å–æ ‡é¢˜
        if (window.levelsConfig && window.levelsConfig.levels) {
            // ä»é…ç½®æ•°ç»„ä¸­æŸ¥æ‰¾å¯¹åº”å…³å¡
            const levelConfig = window.levelsConfig.levels.find(config => config.level === level);
            if (levelConfig) {
                return levelConfig.title;
            }
        }
        
        // é»˜è®¤æ ‡é¢˜
        const titles = {
            1: "Pythonç®€ä»‹",
            2: "å˜é‡ä¸èµ‹å€¼",
            3: "åŸºæœ¬è¾“å…¥è¾“å‡º",
            4: "è¿ç®—ç¬¦",
            5: "æ³¨é‡Šä¸æ–‡æ¡£",
            6: "æ•°å­—ç±»å‹",
            7: "å­—ç¬¦ä¸²æ“ä½œ",
            8: "åˆ—è¡¨ä¸å…ƒç»„",
            9: "å­—å…¸",
            10: "é›†åˆ",
            11: "æ¡ä»¶è¯­å¥",
            12: "forå¾ªç¯",
            13: "whileå¾ªç¯",
            14: "å¾ªç¯æ§åˆ¶",
            15: "å¼‚å¸¸å¤„ç†",
            16: "å‡½æ•°å®šä¹‰",
            17: "å‚æ•°ä¸è¿”å›å€¼",
            18: "ä½œç”¨åŸŸ",
            19: "æ¨¡å—å¯¼å…¥",
            20: "åŒ…ç®¡ç†",
            21: "ç±»ä¸å¯¹è±¡",
            22: "ç»§æ‰¿ä¸å¤šæ€",
            23: "è£…é¥°å™¨",
            24: "ç”Ÿæˆå™¨",
            25: "æ–‡ä»¶å¤„ç†"
        };
        return titles[level] || `å…³å¡ ${level}`;
    }

    // åªæ˜¾ç¤ºé”™é¢˜
    function showWrongAnswers(questions, userAnswers) {
        const reviewsContainer = document.getElementById('questionReviews');
        reviewsContainer.innerHTML = '';
        
        const wrongQuestions = questions.filter(question => {
            const userAnswer = userAnswers[question.id];
            return !userAnswer || !userAnswer.correct;
        });
        
        if (wrongQuestions.length === 0) {
            const message = document.createElement('div');
            message.style.textAlign = 'center';
            message.style.padding = '20px';
            message.style.fontSize = '1.2rem';
            message.innerHTML = 'ğŸ˜€ å¤ªæ£’äº†ï¼ä½ æ²¡æœ‰ç­”é”™ä»»ä½•é¢˜ç›®ï¼';
            reviewsContainer.appendChild(message);
            return;
        }
        
        showQuestionReviews(wrongQuestions, userAnswers);
    }
    
    // åˆå§‹åŒ–æŒ‰é’®äº‹ä»¶
    function initEventListeners(summaryData) {
        // ä»…ç”¨äºåˆå§‹åŒ–çŠ¶æ€å˜é‡ï¼Œä¸å†ç»‘å®šäº‹ä»¶
        showingWrongAnswers = false;
        // æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨éƒ½åœ¨DOMContentLoadedäº‹ä»¶ä¸­ç»‘å®šï¼Œæ­¤å¤„ä¸å†ç»‘å®š
    }

    // åˆ‡æ¢é”™é¢˜/æ‰€æœ‰é¢˜ç›®çš„æ˜¾ç¤º
    function toggleWrongAnswersView() {
        const viewWrongAnswersButton = document.getElementById('viewWrongAnswers');
        
        if (!showingWrongAnswers) {
            // å½“å‰æ˜¾ç¤ºæ‰€æœ‰é¢˜ç›®ï¼Œåˆ‡æ¢åˆ°åªæ˜¾ç¤ºé”™é¢˜
            showWrongAnswers(summaryData.questions, summaryData.answers);
            viewWrongAnswersButton.textContent = 'æŸ¥çœ‹æ‰€æœ‰é¢˜ç›®';
            showingWrongAnswers = true;
        } else {
            // å½“å‰åªæ˜¾ç¤ºé”™é¢˜ï¼Œåˆ‡æ¢åˆ°æ˜¾ç¤ºæ‰€æœ‰é¢˜ç›®
            showQuestionReviews(summaryData.questions, summaryData.answers);
            viewWrongAnswersButton.textContent = 'åªçœ‹é”™é¢˜';
            showingWrongAnswers = false;
        }
    }
    
    // ç”Ÿæˆç­”é¢˜æƒ…å†µåœ†åœˆ
    function generateStatusCircles(questions, userAnswers) {
        const statusCirclesContainer = document.getElementById('statusCircles');
        statusCirclesContainer.innerHTML = '';
        
        // ç¡®ä¿å®¹å™¨å­˜åœ¨
        if (!statusCirclesContainer) return;
        
        // ç”Ÿæˆ15ä¸ªåœ†åœˆ
        for (let i = 0; i < questions.length; i++) {
            const question = questions[i];
            const userAnswer = userAnswers[question.id];
            const isCorrect = userAnswer && userAnswer.correct;
            
            const circle = document.createElement('div');
            circle.className = 'status-circle';
            circle.setAttribute('title', `é¢˜ç›® ${i + 1} - ${isCorrect ? 'æ­£ç¡®' : 'é”™è¯¯'}`);
            
            // æ ¹æ®ç­”é¢˜æƒ…å†µè®¾ç½®åœ†åœˆæ ·å¼
            if (isCorrect) {
                circle.classList.add('correct');
            } else {
                circle.classList.add('incorrect');
            }
            
            // æ·»åŠ æ•°å­—æ ‡è¯†
            circle.textContent = (i + 1);
            
            // æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»åè·³è½¬åˆ°å¯¹åº”é¢˜ç›®å›é¡¾
            circle.addEventListener('click', function() {
                const reviewItem = document.querySelectorAll('.question-review')[i];
                if (reviewItem) {
                    // ä½¿ç”¨çˆ¶å®¹å™¨çš„æ»šåŠ¨è€Œä¸æ˜¯æµè§ˆå™¨çš„æ»šåŠ¨
                    const questionReviews = document.getElementById('questionReviews');
                    if (questionReviews) {
                        // è®¡ç®—ç›¸å¯¹äºçˆ¶å®¹å™¨çš„åç§»
                        const offsetTop = reviewItem.offsetTop - questionReviews.offsetTop;
                        questionReviews.scrollTo({
                            top: offsetTop,
                            behavior: 'smooth'
                        });
                    }
                    
                    // æ·»åŠ é«˜äº®æ•ˆæœ
                    reviewItem.classList.add('highlight');
                    setTimeout(() => {
                        reviewItem.classList.remove('highlight');
                    }, 1500);
                }
            });
            
            statusCirclesContainer.appendChild(circle);
        }
    }
</script>
</body>
</html>

